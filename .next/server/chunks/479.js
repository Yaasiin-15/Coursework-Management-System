"use strict";exports.id=479,exports.ids=[479],exports.modules={6343:(e,a,t)=>{t.d(a,{Z:()=>r});let r=(0,t(62881).Z)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},26754:(e,a,t)=>{t.d(a,{Z:()=>r});let r=(0,t(62881).Z)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},30361:(e,a,t)=>{t.d(a,{Z:()=>r});let r=(0,t(62881).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},48998:(e,a,t)=>{t.d(a,{Z:()=>r});let r=(0,t(62881).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},31540:(e,a,t)=>{t.d(a,{Z:()=>r});let r=(0,t(62881).Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},36283:(e,a,t)=>{t.d(a,{Z:()=>r});let r=(0,t(62881).Z)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},83855:(e,a,t)=>{t.d(a,{Z:()=>r});let r=(0,t(62881).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},24061:(e,a,t)=>{t.d(a,{Z:()=>r});let r=(0,t(62881).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},90434:(e,a,t)=>{t.d(a,{default:()=>s.a});var r=t(79404),s=t.n(r)},88120:(e,a,t)=>{t.d(a,{Z:()=>w});var r=t(10326),s=t(17577),l=t(35047),d=t(90434),n=t(62881);let i=(0,n.Z)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);var c=t(36283),o=t(83855),h=t(26754),x=t(24061),m=t(6343);let g=(0,n.Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),u=(0,n.Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),y=(0,n.Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var b=t(87403);function k(){let[e,a]=(0,s.useState)(null),{isCollapsed:t,setIsCollapsed:n}=(0,b.A)(),k=(0,l.usePathname)();if(!e)return null;let p=[{name:"Dashboard",href:"/dashboard",icon:i,roles:["student","teacher","admin"]},{name:"Assignments",href:"/assignments",icon:c.Z,roles:["student","teacher","admin"]},{name:"Create Assignment",href:"/assignments/create",icon:o.Z,roles:["teacher","admin"]},{name:"Analytics",href:"/analytics",icon:h.Z,roles:["teacher","admin"]},{name:"Classes",href:"/classes",icon:x.Z,roles:["teacher","admin"]},{name:"Courses",href:"/courses",icon:m.Z,roles:["student","teacher","admin"]},{name:"Admin Panel",href:"/admin",icon:g,roles:["admin"]},{name:"Settings",href:"/settings",icon:g,roles:["student","teacher","admin"]},{name:"Test Features",href:"/test-features",icon:g,roles:["student","teacher","admin"]}].filter(a=>a.roles.includes(e.role));return(0,r.jsxs)("div",{className:`bg-white dark:bg-gray-800 shadow-lg h-screen fixed left-0 top-0 z-40 transition-all duration-300 ${t?"w-16":"w-64"}`,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700",children:[!t&&r.jsx("h1",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:"CMS"}),r.jsx("button",{onClick:()=>n(!t),className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:t?r.jsx(u,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}):r.jsx(y,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})]}),r.jsx("nav",{className:"mt-6",children:r.jsx("ul",{className:"space-y-2 px-3",children:p.map(e=>{let a=e.icon,s=k===e.href;return r.jsx("li",{children:(0,r.jsxs)(d.default,{href:e.href,className:`flex items-center px-3 py-2 rounded-lg transition-colors group ${s?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"}`,children:[r.jsx(a,{className:`w-5 h-5 ${t?"mx-auto":"mr-3"}`}),!t&&r.jsx("span",{className:"font-medium",children:e.name})]})},e.name)})})}),!t&&r.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-medium",children:e.name.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:e.role})]})]})})]})}var p=t(43627),f=t(10049),j=t(49541);function v({children:e}){let[a,t]=(0,s.useState)(null),[d,n]=(0,s.useState)(!0),{isCollapsed:i}=(0,b.A)();return((0,l.useRouter)(),d)?r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center transition-colors",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):a?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors",children:[r.jsx(k,{}),(0,r.jsxs)("div",{className:`transition-all duration-300 ${i?"ml-16":"ml-64"}`,children:[r.jsx(p.Z,{}),r.jsx("main",{className:"p-4 sm:p-6",children:e})]})]}):null}function w({children:e}){return r.jsx(f.ThemeProvider,{children:r.jsx(j.NotificationProvider,{children:r.jsx(b.SidebarProvider,{children:r.jsx(v,{children:e})})})})}},37589:(e,a,t)=>{t.d(a,{Z:()=>o});var r=t(10326),s=t(17577),l=t(31540),d=t(62881);let n=(0,d.Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),i=(0,d.Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var c=t(36283);function o({assignmentId:e,maxMarks:a,onClose:t}){let[d,o]=(0,s.useState)([]),[h,x]=(0,s.useState)(null),[m,g]=(0,s.useState)(0),[u,y]=(0,s.useState)(""),[b,k]=(0,s.useState)(!0),[p,f]=(0,s.useState)(!1),j=async(e,a)=>{try{let t=localStorage.getItem("token"),r=await fetch(`/api/files/download?path=${encodeURIComponent(e)}`,{headers:{Authorization:`Bearer ${t}`}});if(r.ok){let e=await r.blob(),t=window.URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download=a,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(t),document.body.removeChild(s)}}catch(e){console.error("Error downloading file:",e)}},v=async()=>{if(h){f(!0);try{let e=localStorage.getItem("token");(await fetch(`/api/submissions/${h._id}/grade`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({marks:m,feedback:u})})).ok&&(o(e=>e.map(e=>e._id===h._id?{...e,marks:m,feedback:u,status:"graded"}:e)),x(e=>e?{...e,marks:m,feedback:u,status:"graded"}:null))}catch(e){console.error("Error saving grade:",e)}finally{f(!1)}}},w=async()=>{try{let a=localStorage.getItem("token"),t=await fetch(`/api/assignments/${e}/bulk-download`,{headers:{Authorization:`Bearer ${a}`}});if(t.ok){let a=await t.blob(),r=window.URL.createObjectURL(a),s=document.createElement("a");s.href=r,s.download=`assignment-${e}-submissions.zip`,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(r),document.body.removeChild(s)}}catch(e){console.error("Error downloading bulk files:",e)}};return b?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading submissions..."})]})}):r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-6xl h-5/6 flex flex-col",children:[(0,r.jsxs)("div",{className:"p-6 border-b dark:border-gray-700 flex items-center justify-between",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Grading Interface (",d.length," submissions)"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("button",{onClick:w,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[r.jsx(l.Z,{className:"w-4 h-4"}),r.jsx("span",{children:"Bulk Download"})]}),r.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Close"})]})]}),(0,r.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[r.jsx("div",{className:"w-1/3 border-r dark:border-gray-700 overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Submissions"}),0===d.length?r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No submissions yet"}):r.jsx("div",{className:"space-y-2",children:d.map(e=>(0,r.jsxs)("div",{onClick:()=>x(e),className:`p-3 rounded-lg cursor-pointer transition-colors ${h?._id===e._id?"bg-blue-100 dark:bg-blue-900/30 border-blue-300 dark:border-blue-600":"bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(n,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e.studentId.name}),r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${"graded"===e.status?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"late"===e.status?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:e.status})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:e.fileName}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:new Date(e.submittedAt).toLocaleString()}),void 0!==e.marks&&(0,r.jsxs)("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-400 mt-1",children:[e.marks,"/",a," marks"]})]},e._id))})]})}),r.jsx("div",{className:"flex-1 flex flex-col",children:h?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"p-6 border-b dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:h.studentId.name}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:h.studentId.email})]}),(0,r.jsxs)("button",{onClick:()=>j(h.fileUrl,h.fileName),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[r.jsx(l.Z,{className:"w-4 h-4"}),r.jsx("span",{children:"Download"})]})]})}),r.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Marks (out of ",a,")"]}),r.jsx("input",{type:"number",min:"0",max:a,value:m,onChange:e=>g(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Feedback"}),r.jsx("textarea",{value:u,onChange:e=>y(e.target.value),rows:8,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Provide detailed feedback for the student..."})]}),(0,r.jsxs)("button",{onClick:v,disabled:p,className:"flex items-center space-x-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(i,{className:"w-4 h-4"}),r.jsx("span",{children:p?"Saving...":"Save Grade"})]})]})})]}):r.jsx("div",{className:"flex-1 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[r.jsx(c.Z,{className:"w-12 h-12 mx-auto mb-4"}),r.jsx("p",{children:"Select a submission to start grading"})]})})})]})]})})}}};