(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[109],{67571:function(e,s,a){Promise.resolve().then(a.bind(a,99524))},99524:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return k}});var t=a(57437),r=a(84478),l=a(2265),n=a(47625),d=a(75169),i=a(3574),c=a(20407),o=a(8147),x=a(21156),h=a(56940),m=a(97059),g=a(62994),u=a(54061),j=a(77031),b=a(31699),f=a(95805),y=a(48736),N=a(33327),v=a(70525);function p(){let[e,s]=(0,l.useState)(null),[a,r]=(0,l.useState)(!0),[p,k]=(0,l.useState)("6months");(0,l.useEffect)(()=>{w()},[p]);let w=async()=>{try{let e=localStorage.getItem("token"),a=await fetch("/api/analytics?range=".concat(p),{headers:{Authorization:"Bearer ".concat(e)}});if(a.ok){let e=await a.json();s(e)}}catch(e){console.error("Error fetching analytics:",e)}finally{r(!1)}},S=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];return a?(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-6"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)("div",{className:"h-24 bg-gray-200 dark:bg-gray-700 rounded"},s))}),(0,t.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded"},s))})]})}):e?(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Analytics Dashboard"}),(0,t.jsxs)("select",{value:p,onChange:e=>k(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[(0,t.jsx)("option",{value:"1month",children:"Last Month"}),(0,t.jsx)("option",{value:"3months",children:"Last 3 Months"}),(0,t.jsx)("option",{value:"6months",children:"Last 6 Months"}),(0,t.jsx)("option",{value:"1year",children:"Last Year"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:(0,t.jsx)(f.Z,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Students"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.totalStudents})]})]})}),(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:(0,t.jsx)(y.Z,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Assignments"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.totalAssignments})]})]})}),(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:(0,t.jsx)(N.Z,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Average Grade"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[e.averageGrade.toFixed(1),"%"]})]})]})}),(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:(0,t.jsx)(v.Z,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Submission Rate"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[e.submissionRate.toFixed(1),"%"]})]})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Grade Distribution"}),(0,t.jsx)(n.h,{width:"100%",height:300,children:(0,t.jsxs)(d.u,{children:[(0,t.jsx)(i.b,{data:e.gradeDistribution,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{grade:s,count:a}=e;return"".concat(s,": ").concat(a)},outerRadius:80,fill:"#8884d8",dataKey:"count",children:e.gradeDistribution.map((e,s)=>(0,t.jsx)(c.b,{fill:S[s%S.length]},"cell-".concat(s)))}),(0,t.jsx)(o.u,{})]})})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Performance Trend"}),(0,t.jsx)(n.h,{width:"100%",height:300,children:(0,t.jsxs)(x.w,{data:e.performanceTrend,children:[(0,t.jsx)(h.q,{strokeDasharray:"3 3"}),(0,t.jsx)(m.K,{dataKey:"month"}),(0,t.jsx)(g.B,{}),(0,t.jsx)(o.u,{}),(0,t.jsx)(u.x,{type:"monotone",dataKey:"average",stroke:"#8884d8",strokeWidth:2})]})})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Assignment Performance"}),(0,t.jsx)(n.h,{width:"100%",height:300,children:(0,t.jsxs)(j.v,{data:e.assignmentStats,children:[(0,t.jsx)(h.q,{strokeDasharray:"3 3"}),(0,t.jsx)(m.K,{dataKey:"title"}),(0,t.jsx)(g.B,{}),(0,t.jsx)(o.u,{}),(0,t.jsx)(b.$,{dataKey:"average",fill:"#8884d8"})]})})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top Performers"}),(0,t.jsx)("div",{className:"space-y-3",children:e.topPerformers.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white text-sm font-medium",children:s+1})}),(0,t.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:e.name})]}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:[e.average.toFixed(1),"%"]})]},s))})]})]})]}):(0,t.jsx)("div",{className:"p-6 text-center",children:(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No analytics data available"})})}function k(){return(0,t.jsx)(r.Z,{children:(0,t.jsx)(p,{})})}},84478:function(e,s,a){"use strict";a.d(s,{Z:function(){return p}});var t=a(57437),r=a(2265),l=a(99376),n=a(27648),d=a(14938),i=a(48736),c=a(99397),o=a(96215),x=a(95805),h=a(71769),m=a(98728),g=a(10407),u=a(92451),j=a(43241);function b(){let[e,s]=(0,r.useState)(null),{isCollapsed:a,setIsCollapsed:b}=(0,j.A)(),f=(0,l.usePathname)();if((0,r.useEffect)(()=>{let e=localStorage.getItem("user");e&&s(JSON.parse(e))},[]),!e)return null;let y=[{name:"Dashboard",href:"/dashboard",icon:d.Z,roles:["student","teacher","admin"]},{name:"Assignments",href:"/assignments",icon:i.Z,roles:["student","teacher","admin"]},{name:"Create Assignment",href:"/assignments/create",icon:c.Z,roles:["teacher","admin"]},{name:"Analytics",href:"/analytics",icon:o.Z,roles:["teacher","admin"]},{name:"Classes",href:"/classes",icon:x.Z,roles:["teacher","admin"]},{name:"Courses",href:"/courses",icon:h.Z,roles:["student","teacher","admin"]},{name:"Admin Panel",href:"/admin",icon:m.Z,roles:["admin"]},{name:"Settings",href:"/settings",icon:m.Z,roles:["student","teacher","admin"]},{name:"Test Features",href:"/test-features",icon:m.Z,roles:["student","teacher","admin"]}].filter(s=>s.roles.includes(e.role));return(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow-lg h-screen fixed left-0 top-0 z-40 transition-all duration-300 ".concat(a?"w-16":"w-64"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700",children:[!a&&(0,t.jsx)("h1",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:"CMS"}),(0,t.jsx)("button",{onClick:()=>b(!a),className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:a?(0,t.jsx)(g.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}):(0,t.jsx)(u.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})]}),(0,t.jsx)("nav",{className:"mt-6",children:(0,t.jsx)("ul",{className:"space-y-2 px-3",children:y.map(e=>{let s=e.icon,r=f===e.href;return(0,t.jsx)("li",{children:(0,t.jsxs)(n.default,{href:e.href,className:"flex items-center px-3 py-2 rounded-lg transition-colors group ".concat(r?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"),children:[(0,t.jsx)(s,{className:"w-5 h-5 ".concat(a?"mx-auto":"mr-3")}),!a&&(0,t.jsx)("span",{className:"font-medium",children:e.name})]})},e.name)})})}),!a&&(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white text-sm font-medium",children:e.name.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:e.role})]})]})})]})}var f=a(44696),y=a(69734),N=a(23504);function v(e){let{children:s}=e,[a,n]=(0,r.useState)(null),[d,i]=(0,r.useState)(!0),{isCollapsed:c}=(0,j.A)(),o=(0,l.useRouter)();return((0,r.useEffect)(()=>{let e=localStorage.getItem("token"),s=localStorage.getItem("user");if(!e||!s){o.push("/login");return}n(JSON.parse(s)),i(!1)},[o]),d)?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center transition-colors",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):a?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors",children:[(0,t.jsx)(b,{}),(0,t.jsxs)("div",{className:"transition-all duration-300 ".concat(c?"ml-16":"ml-64"),children:[(0,t.jsx)(f.Z,{}),(0,t.jsx)("main",{className:"p-4 sm:p-6",children:s})]})]}):null}function p(e){let{children:s}=e;return(0,t.jsx)(y.ThemeProvider,{children:(0,t.jsx)(N.NotificationProvider,{children:(0,t.jsx)(j.SidebarProvider,{children:(0,t.jsx)(v,{children:s})})})})}},43241:function(e,s,a){"use strict";a.d(s,{A:function(){return d},SidebarProvider:function(){return n}});var t=a(57437),r=a(2265);let l=(0,r.createContext)(void 0);function n(e){let{children:s}=e,[a,n]=(0,r.useState)(!1);return(0,t.jsx)(l.Provider,{value:{isCollapsed:a,setIsCollapsed:n},children:s})}function d(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useSidebar must be used within a SidebarProvider");return e}}},function(e){e.O(0,[972,323,696,971,117,744],function(){return e(e.s=67571)}),_N_E=e.O()}]);