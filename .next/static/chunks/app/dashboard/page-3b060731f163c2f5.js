(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{93820:function(e,s,t){Promise.resolve().then(t.bind(t,50441))},50441:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return m}});var a=t(57437),l=t(2265),r=t(99376),n=t(84478),i=t(89823),d=t(55900),c=t(41671),x=t(91723);function m(){var e;let[s,t]=(0,l.useState)(null),[m,o]=(0,l.useState)([]),[h,g]=(0,l.useState)(!0),[u,f]=(0,l.useState)(null),j=(0,r.useRouter)();(0,l.useEffect)(()=>{let e=localStorage.getItem("token"),s=localStorage.getItem("user");if(!e||!s){j.push("/login");return}t(JSON.parse(s)),N(e)},[j]);let N=async e=>{try{let s=await fetch("/api/assignments",{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();o(e.assignments)}}catch(e){console.error("Error fetching assignments:",e)}finally{g(!1)}},w=e=>{let s=new Date;return Math.ceil((new Date(e).getTime()-s.getTime())/864e5)},y=e=>{let s=w(e);return s<0?"text-red-600 dark:text-red-400":s<=3?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400"};if(!s)return null;let v=m.filter(e=>new Date(e.deadline)>new Date),b=m.filter(e=>new Date(e.deadline)<=new Date);return(0,a.jsxs)(n.Z,{children:[(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,a.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:["Welcome back, ",s.name,"!"]}),(0,a.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"teacher"===s.role?"Manage your assignments and view student submissions.":"View your assignments and submit your work."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg transition-colors",children:(0,a.jsx)("div",{className:"p-4 sm:p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(d.Z,{className:"w-4 h-4 text-white"})})}),(0,a.jsx)("div",{className:"ml-4 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"teacher"===s.role?"Total Assignments":"Active Assignments"}),(0,a.jsx)("dd",{className:"text-lg font-medium text-gray-900 dark:text-white",children:m.length})]})})]})})}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg transition-colors",children:(0,a.jsx)("div",{className:"p-4 sm:p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(c.Z,{className:"w-4 h-4 text-white"})})}),(0,a.jsx)("div",{className:"ml-4 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"teacher"===s.role?"Graded":"Completed"}),(0,a.jsx)("dd",{className:"text-lg font-medium text-gray-900 dark:text-white",children:b.length})]})})]})})}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg transition-colors sm:col-span-2 lg:col-span-1",children:(0,a.jsx)("div",{className:"p-4 sm:p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"w-4 h-4 text-white"})})}),(0,a.jsx)("div",{className:"ml-4 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"Upcoming"}),(0,a.jsx)("dd",{className:"text-lg font-medium text-gray-900 dark:text-white",children:v.length})]})})]})})})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow overflow-hidden sm:rounded-md transition-colors",children:[(0,a.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,a.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Recent Assignments"}),(0,a.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500 dark:text-gray-400",children:"teacher"===s.role?"Your latest assignments and their status.":"Upcoming assignments and deadlines."})]}),h?(0,a.jsxs)("div",{className:"p-6 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading..."})]}):0===m.length?(0,a.jsx)("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:"No assignments found."}):(0,a.jsx)("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:m.slice(0,5).map(e=>{let t=w(e.deadline);return(0,a.jsx)("li",{children:(0,a.jsxs)("div",{className:"px-4 py-4 flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0",children:[(0,a.jsxs)("div",{className:"flex items-center min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:e.course.charAt(0)})})}),(0,a.jsxs)("div",{className:"ml-4 min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.title}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.course," â€¢ ",e.maxMarks," marks"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between sm:justify-end space-x-4",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:y(e.deadline),children:t<0?"Overdue by ".concat(Math.abs(t)," day(s)"):0===t?"Due today":"Due in ".concat(t," day(s)")}),(0,a.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(e.deadline).toLocaleDateString()})]}),"teacher"===s.role&&(0,a.jsx)("button",{onClick:()=>f(e._id),className:"px-3 py-1 text-xs bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Grade"})]})]})},e._id)})})]})]}),u&&(0,a.jsx)(i.Z,{assignmentId:u,maxMarks:(null===(e=m.find(e=>e._id===u))||void 0===e?void 0:e.maxMarks)||100,onClose:()=>f(null)})]})}}},function(e){e.O(0,[972,916,696,483,971,117,744],function(){return e(e.s=93820)}),_N_E=e.O()}]);